"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const fs = require("fs");
const LOCALCONFIG_FILE_NAME = './localconfig.json';
let _config;
const debug = require('debug')('api-shell:localconfig:');
function setup() {
    if (!_config) {
        debug('loading local configuration');
        loadLocalConfig();
        setupEnvVars();
    }
    else
        debug('local configuration already loaded');
    function loadLocalConfig() {
        try {
            _config = JSON.parse(fs.readFileSync(LOCALCONFIG_FILE_NAME, 'utf8'));
        }
        catch (error) {
            debug(error);
            _config = {};
        }
    }
}
exports.setup = setup;
function setupEnvVars() {
    try {
        if (_config['process.env']) {
            Object.keys(_config['process.env']).forEach(key => {
                process.env[key] = _config['process.env'][key];
            });
        }
    }
    catch (error) {
        debug(error);
    }
}
function isInDevelopmentMode() {
    return _config === undefined ? false : true;
}
exports.isInDevelopmentMode = isInDevelopmentMode;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxzL2xvY2FsY29uZmlnLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEseUJBQXlCO0FBQ3pCLE1BQU0scUJBQXFCLEdBQUcsb0JBQW9CLENBQUM7QUFDbkQsSUFBSSxPQUFZLENBQUM7QUFDakIsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLHdCQUF3QixDQUFDLENBQUM7QUFNekQ7SUFDSSxJQUFJLENBQUMsT0FBTyxFQUFFO1FBQ1YsS0FBSyxDQUFDLDZCQUE2QixDQUFDLENBQUM7UUFDckMsZUFBZSxFQUFFLENBQUM7UUFDbEIsWUFBWSxFQUFFLENBQUM7S0FDbEI7O1FBQ0csS0FBSyxDQUFDLG9DQUFvQyxDQUFDLENBQUM7SUFFaEQ7UUFDSSxJQUFJO1lBQ0EsT0FBTyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLFlBQVksQ0FBQyxxQkFBcUIsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDO1NBQ3hFO1FBQUMsT0FBTyxLQUFLLEVBQUU7WUFDWixLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDYixPQUFPLEdBQUcsRUFBRSxDQUFDO1NBQ2hCO0lBQ0wsQ0FBQztBQUNMLENBQUM7QUFoQkQsc0JBZ0JDO0FBS0Q7SUFDSSxJQUFJO1FBQ0EsSUFBSSxPQUFPLENBQUMsYUFBYSxDQUFDLEVBQUU7WUFDeEIsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLEVBQUU7Z0JBQzlDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ25ELENBQUMsQ0FBQyxDQUFDO1NBQ047S0FDSjtJQUFDLE9BQU8sS0FBSyxFQUFFO1FBQUUsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO0tBQUU7QUFDckMsQ0FBQztBQUtEO0lBQ0ksT0FBTyxPQUFPLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztBQUNoRCxDQUFDO0FBRkQsa0RBRUMiLCJmaWxlIjoidXRpbHMvbG9jYWxjb25maWcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7XHJcbmNvbnN0IExPQ0FMQ09ORklHX0ZJTEVfTkFNRSA9ICcuL2xvY2FsY29uZmlnLmpzb24nO1xyXG5sZXQgX2NvbmZpZzogYW55O1xyXG5jb25zdCBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ2FwaS1zaGVsbDpsb2NhbGNvbmZpZzonKTtcclxuXHJcbi8qKlxyXG4gKiBSdW4gbG9jYWwgY29uZmlndXJhdGlvbiBzZXR1cFxyXG4gKiBBZGQgbG9jYWwgY29uZmlndXJhdGlvbiB0byBfY29uZmlnLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNldHVwKCkge1xyXG4gICAgaWYgKCFfY29uZmlnKSB7XHJcbiAgICAgICAgZGVidWcoJ2xvYWRpbmcgbG9jYWwgY29uZmlndXJhdGlvbicpO1xyXG4gICAgICAgIGxvYWRMb2NhbENvbmZpZygpO1xyXG4gICAgICAgIHNldHVwRW52VmFycygpO1xyXG4gICAgfSBlbHNlXHJcbiAgICAgICAgZGVidWcoJ2xvY2FsIGNvbmZpZ3VyYXRpb24gYWxyZWFkeSBsb2FkZWQnKTtcclxuXHJcbiAgICBmdW5jdGlvbiBsb2FkTG9jYWxDb25maWcoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgX2NvbmZpZyA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKExPQ0FMQ09ORklHX0ZJTEVfTkFNRSwgJ3V0ZjgnKSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgZGVidWcoZXJyb3IpO1xyXG4gICAgICAgICAgICBfY29uZmlnID0ge307XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogTG9hZCBfY29uZmlnIHNldHRpbmdzIGludG8gcHJvY2VzcyBlbnZpcm9ubWVudCB2YXJpYWJsZXMuXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXR1cEVudlZhcnMoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGlmIChfY29uZmlnWydwcm9jZXNzLmVudiddKSB7XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKF9jb25maWdbJ3Byb2Nlc3MuZW52J10pLmZvckVhY2goa2V5ID0+IHtcclxuICAgICAgICAgICAgICAgIHByb2Nlc3MuZW52W2tleV0gPSBfY29uZmlnWydwcm9jZXNzLmVudiddW2tleV07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7IGRlYnVnKGVycm9yKTsgfVxyXG59XHJcblxyXG4vKipcclxuICogRGV0ZXJtaW5lIG1vZGUgb2Ygb3BlcmF0aW9uIGJ5IGV4aXN0ZW5jZSBvZiBsb2NhbGNvbmZpZy5qc29uXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNJbkRldmVsb3BtZW50TW9kZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiBfY29uZmlnID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IHRydWU7XHJcbn0iXX0=
