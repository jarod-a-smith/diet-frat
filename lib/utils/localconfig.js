"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const fs = require("fs");
const LOCALCONFIG_FILE_NAME = './localconfig.json';
let _config;
const debug = require('debug')('api-shell:localconfig:');
function setup() {
    if (!_config) {
        debug('loading local configuration');
        loadLocalConfig();
        setupEnvVars();
    }
    else
        debug('local configuration already loaded');
    function loadLocalConfig() {
        try {
            _config = JSON.parse(fs.readFileSync(LOCALCONFIG_FILE_NAME, 'utf8'));
        }
        catch (error) {
            debug(error);
            _config = {};
        }
    }
}
exports.setup = setup;
function setupEnvVars() {
    try {
        if (_config['process.env']) {
            Object.keys(_config['process.env']).forEach(key => {
                process.env[key] = _config['process.env'][key];
            });
        }
    }
    catch (error) {
        debug(error);
    }
}
function isInDevelopmentMode() {
    return _config === undefined ? false : true;
}
exports.isInDevelopmentMode = isInDevelopmentMode;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxzL2xvY2FsY29uZmlnLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEseUJBQXlCO0FBQ3pCLE1BQU0scUJBQXFCLEdBQUcsb0JBQW9CLENBQUM7QUFDbkQsSUFBSSxPQUFZLENBQUM7QUFDakIsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLHdCQUF3QixDQUFDLENBQUM7QUFNekQ7SUFDSSxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFDWCxLQUFLLENBQUMsNkJBQTZCLENBQUMsQ0FBQztRQUNyQyxlQUFlLEVBQUUsQ0FBQztRQUNsQixZQUFZLEVBQUUsQ0FBQztJQUNuQixDQUFDO0lBQUMsSUFBSTtRQUNGLEtBQUssQ0FBQyxvQ0FBb0MsQ0FBQyxDQUFDO0lBRWhEO1FBQ0ksSUFBSSxDQUFDO1lBQ0QsT0FBTyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLFlBQVksQ0FBQyxxQkFBcUIsRUFBRSxNQUFNLENBQUMsQ0FBQyxDQUFDO1FBQ3pFLENBQUM7UUFBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQ2IsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ2IsT0FBTyxHQUFHLEVBQUUsQ0FBQztRQUNqQixDQUFDO0lBQ0wsQ0FBQztBQUNMLENBQUM7QUFoQkQsc0JBZ0JDO0FBS0Q7SUFDSSxJQUFJLENBQUM7UUFDRCxFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3pCLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxFQUFFO2dCQUM5QyxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztZQUNuRCxDQUFDLENBQUMsQ0FBQztRQUNQLENBQUM7SUFDTCxDQUFDO0lBQUMsS0FBSyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUFDLENBQUM7QUFDckMsQ0FBQztBQUtEO0lBQ0ksTUFBTSxDQUFDLE9BQU8sS0FBSyxTQUFTLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO0FBQ2hELENBQUM7QUFGRCxrREFFQyIsImZpbGUiOiJ1dGlscy9sb2NhbGNvbmZpZy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJztcclxuY29uc3QgTE9DQUxDT05GSUdfRklMRV9OQU1FID0gJy4vbG9jYWxjb25maWcuanNvbic7XHJcbmxldCBfY29uZmlnOiBhbnk7XHJcbmNvbnN0IGRlYnVnID0gcmVxdWlyZSgnZGVidWcnKSgnYXBpLXNoZWxsOmxvY2FsY29uZmlnOicpO1xyXG5cclxuLyoqXHJcbiAqIFJ1biBsb2NhbCBjb25maWd1cmF0aW9uIHNldHVwXHJcbiAqIEFkZCBsb2NhbCBjb25maWd1cmF0aW9uIHRvIF9jb25maWcuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2V0dXAoKSB7XHJcbiAgICBpZiAoIV9jb25maWcpIHtcclxuICAgICAgICBkZWJ1ZygnbG9hZGluZyBsb2NhbCBjb25maWd1cmF0aW9uJyk7XHJcbiAgICAgICAgbG9hZExvY2FsQ29uZmlnKCk7XHJcbiAgICAgICAgc2V0dXBFbnZWYXJzKCk7XHJcbiAgICB9IGVsc2VcclxuICAgICAgICBkZWJ1ZygnbG9jYWwgY29uZmlndXJhdGlvbiBhbHJlYWR5IGxvYWRlZCcpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGxvYWRMb2NhbENvbmZpZygpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBfY29uZmlnID0gSlNPTi5wYXJzZShmcy5yZWFkRmlsZVN5bmMoTE9DQUxDT05GSUdfRklMRV9OQU1FLCAndXRmOCcpKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBkZWJ1ZyhlcnJvcik7XHJcbiAgICAgICAgICAgIF9jb25maWcgPSB7fTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBMb2FkIF9jb25maWcgc2V0dGluZ3MgaW50byBwcm9jZXNzIGVudmlyb25tZW50IHZhcmlhYmxlcy5cclxuICovXHJcbmZ1bmN0aW9uIHNldHVwRW52VmFycygpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgaWYgKF9jb25maWdbJ3Byb2Nlc3MuZW52J10pIHtcclxuICAgICAgICAgICAgT2JqZWN0LmtleXMoX2NvbmZpZ1sncHJvY2Vzcy5lbnYnXSkuZm9yRWFjaChrZXkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcHJvY2Vzcy5lbnZba2V5XSA9IF9jb25maWdbJ3Byb2Nlc3MuZW52J11ba2V5XTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHsgZGVidWcoZXJyb3IpOyB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZXRlcm1pbmUgbW9kZSBvZiBvcGVyYXRpb24gYnkgZXhpc3RlbmNlIG9mIGxvY2FsY29uZmlnLmpzb25cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0luRGV2ZWxvcG1lbnRNb2RlKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIF9jb25maWcgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogdHJ1ZTtcclxufSJdfQ==
